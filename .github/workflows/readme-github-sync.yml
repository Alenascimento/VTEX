name: Sync Readme.io

on: 
 
  push:
    branches:
      - 'master'

jobs:
  Sync:

    runs-on: ubuntu-latest
    
    steps:
    - name: Sync Master Data V2 schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5eb562add9eb40005e6893ee' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - Master Data API - v2.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Master Data V10.2 schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5eb562add9eb40005e689403' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - MasterData API - v10.2.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Session Manager schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5eb562add9eb40005e6893ef' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - Session Manager API.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync License Manager schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5eb562add9eb40005e6893f0' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - License Manager API.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync 'Change url schema' schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5eb562add9eb40005e6893f3' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'CMS - Change URI Schema.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Giftcard System API schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5eb562add9eb40005e6893f4' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - Giftcard System API.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Customer Credit API schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5eb562add9eb40005e6893f5' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - Customer Credit API.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Giftcard Hub API schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5eb562add9eb40005e6893f6' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - GiftCard Hub API.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Giftcard Provider Protocol schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5eb562add9eb40005e6893f8' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - Giftcard Provider Protocol.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Payment Provider Protocol schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5eb562add9eb40005e6893fa' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - Payment Provider Protocol.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Payments Gateway API schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5eb562add9eb40005e6893fb' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - Payments Gateway API.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Pricing API schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5eb562add9eb40005e6893fc' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - Pricing API.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Recurrence schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5eb562add9eb40005e6893fe' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - Recurrence (v1 - deprecated).json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Subscriptions API (v2) schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5eb562add9eb40005e689400' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - Subscriptions API (v2).json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Suggestions API schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5eb562add9eb40005e689401' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - Suggestions API.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Vtex DO API schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5eb562add9eb40005e689402' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - VTEX Do API.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Vtex Antifraud Provider schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5ebd5c4388e5b2001e02b8b2' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - Antifraud Provider API.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to

  Sync_CLI:

    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v1
      - uses: actions/setup-node@v1
        with:
          node-version: '12.x'
      - name: Install RDME
        run: npm install -g rdme
      - name: Sync Search API
        run: rdme swagger 'VTEX - Search API.json' --key=${{ secrets.README_API_KEY }} --version=v2.1 --id=5eb562add9eb40005e6893ff
      - name: Sync Orders API
        run: rdme swagger 'VTEX - Orders API.json' --key=${{ secrets.README_API_KEY }} --version=v2.1 --id=5eb562add9eb40005e6893ed
      - name: Sync Logistics API
        run: rdme swagger 'VTEX - Logistics API.json' --key=${{ secrets.README_API_KEY }} --version=v2.1 --id=5eb562add9eb40005e6893f9
      - name: Sync Catalog API
        run: rdme swagger 'VTEX - Catalog API.json' --key=${{ secrets.README_API_KEY }} --version=v2.1 --id=5eb562add9eb40005e6893f1
      - name: Sync Checkout API
        run: rdme swagger 'VTEX - Checkout API.json' --key=${{ secrets.README_API_KEY }} --version=v2.1 --id=5eb562add9eb40005e6893f2
      - name: Sync Rates and Benefits API
        run: rdme swagger 'VTEX - Rates and Benefits API.json' --key=${{ secrets.README_API_KEY }} --version=v2.1 --id=5eb562add9eb40005e6893fd