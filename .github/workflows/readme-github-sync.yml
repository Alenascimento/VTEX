name: Sync Readme.io

on: 
 
  push:
    branches:
      - 'master'

jobs:
  Sync:

    runs-on: ubuntu-latest
    
    steps:
    - name: Sync Master Data V2 schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5df7c55e6e1158021e7e9a98' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - Master Data API - v2.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Master Data V10.2 schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '69476a767935685a52626a30' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - MasterData API - v10.2.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Session Manager schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5dfc1ecedae9c500333f2c38' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - Session Manager API.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync License Manager schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5dfccf23c7a137003d46a08e' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - License Manager API.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync 'Change url schema' schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5e00ad85954083003ca4ae4e' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'CMS - Change URI Schema.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Giftcard System API schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5e01696f08b800004edbc631' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - Giftcard System API.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Customer Credit API schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5e016a5502b97a00253f4b51' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - Customer Credit API.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Giftcard Hub API schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5e0377d652fef50035cac47c' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - GiftCard Hub API.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Giftcard Provider Protocol schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5e037e71aad6be006ebf8260' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - Giftcard Provider Protocol.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Payment Provider Protocol schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5e0a34570a37db003ac399cb' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - Payment Provider Protocol.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Payments Gateway API schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5e0a3541a70f8d0011b6da7c' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - Payments Gateway API.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Pricing API schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5e0a36e62dade9006081c9b0' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - Pricing API.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Recurrence schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5e0a4da74d2f9a002b1f8c0a' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - Recurrence (v1 - deprecated).json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Subscriptions API (v2) schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5e0a51b7f480f0006b3d57eb' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - Subscriptions API (v2).json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Suggestions API schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5e0a52b01be05d0011aadc78' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - Suggestions API.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to
    - name: Sync Vtex DO API schema
      uses: readmeio/github-readme-sync@1.0.3
      with:
        repo-token: '${{ secrets.GITHUB_TOKEN }}' # DON'T MODIFY--Allows us to get the contents of your spec file
        readme-api-id: '5e0a53d7ae092d00268f2a24' # DON'T MODIFY--Autogenerated to match API Settings in ReadMe to synced file!
        api-file-path: 'VTEX - VTEX Do API.json' # path to API spec file
        readme-api-key: '${{ secrets.README_API_KEY }}' # ReadMe API key 
        readme-api-version: '2.1' # ReadMe version to sync to

  Sync_CLI:

    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v1
      - uses: actions/setup-node@v1
        with:
          node-version: '12.x'
      - name: Install RDME
        run: npm install -g rdme
      - name: Sync Search API
        run: rdme swagger 'VTEX - Search API.json' --key=${{ secrets.README_API_KEY }} --version=v2.1 --id=5e0a508a0a37db003ac39b7d
      - name: Sync Orders API
        run: rdme swagger 'VTEX - Orders API.json' --key=${{ secrets.README_API_KEY }} --version=v2.1 --id=5df14ffe35dcff013ea8b171
      - name: Sync Logistics API
        run: rdme swagger 'VTEX - Logistics API.json' --key=${{ secrets.README_API_KEY }} --version=v2.1 --id=5e03812f0ed666004c336170
      - name: Sync Catalog API
        run: rdme swagger 'VTEX - Catalog API.json' --key=${{ secrets.README_API_KEY }} --version=v2.1 --id=5dfd101518948c01f58359c6
      - name: Sync Checkout API
        run: rdme swagger 'VTEX - Checkout API.json' --key=${{ secrets.README_API_KEY }} --version=v2.1 --id=5dfee6e8ebfe24006d9c19cc
      - name: Sync Rates and Benefits API
        run: rdme swagger 'VTEX - Rates and Benefits API.json' --key=${{ secrets.README_API_KEY }} --version=v2.1 --id=5e0a40705995c4004c5e5194