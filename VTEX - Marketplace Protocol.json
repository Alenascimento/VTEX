{
	"openapi": "3.0.0",
	"info": {
		"title": "Marketplace Protocol",
		"description": "The _Marketplace Protocol_ is a set of API requests and definitions to help you integrate external sellers integrate into VTEX marketplace as well as external marketplaces integrate into VTEX sellers.",
		"contact": {},
		"version": "1.0"
	},
	"servers": [
		{
			"url": "https://{ApiEndpoint}/api",
			"description": ""
		}
	],
	"paths": {
		"/pvt/orderForms/simulation?sc={salesChannelId}&an={merchantName}": {
			"post": {
				"tags": [
					"External Seller"
				],
				"summary": "Fulfillment Simulation",
				"description": "When the Change Notification request returns a response with status 200, it means that the SKU already exists in the marketplace. Whenever this happens, the marketplace will call the seller to get two updated information about the SKU: Price and Inventory.\n\nThe seller needs to have an endpoint implemented in order to receive this call and send a response containing the requested information to the marketplace. We call it the Fulfillment Simulation endpoint.\n\nThe marketplace will send an object containing an array of items. The seller must use this list to get the updated information about the referred SKUs and send them back to the marketplace, following the response format explained in the API Reference.",
				"operationId": "fulfillment-simulation",
				"parameters": [                    
					{
						"name": "Accept",
						"in": "header",
						"description": "HTTP Client Negotiation _Accept_ Header. Indicates the types of responses the client can understand.",
						"required": true,
						"style": "simple",
						"schema": {
							"type": "string",
							"example": "application/json"
						}
					},
					{
						"name": "Content-Type",
						"in": "header",
						"description": "Describes the type of the content being sent.",
						"required": true,
						"style": "simple",
						"schema": {
							"type": "string",
							"example": "application/json"
						}
					}
				],
				"requestBody": {
					"description": "",
					"content": {
						"application/json": {
							"schema": {
								"$ref": "#/components/schemas/fulfillmentSimulation"
							},
							"example": {
								
							}
						}
					},
					"required": true
				},
				"responses": {
					"200": {
						"description": "",
						"headers": {},
						"content": {
							"application/json": {								
								"examples": {
                                    "response": {
                                        "value": {                                 
                                            "country": "BRA",
                                            "items": [
                                                    {
                                                    "attachmentOfferings": [{
                                                        "name": "Customization",
                                                        "required": true,
                                                        "schema": {
                                                        "Name": {
                                                            "maximumNumberOfCharacters": 20,
                                                            "domain": []
                                                        },
                                                        "Number": {
                                                            "maximumNumberOfCharacters": 20,
                                                            "domain": []
                                                        }
                                                        }
                                                    }],
                                                    "id": "2000037",
                                                    "listPrice": 67203,
                                                    "measurementUnit": "un",
                                                    "merchantName": "mySeller1",
                                                    "offerings":[
                                                    {
                                                        "type": "Warranty",
                                                        "id": "5",
                                                        "name": "1 year warranty",
                                                        "price": 10000
                                                    }
                                                    ],
                                                    "price": 67203,
                                                    "priceTags": [],
                                                    "priceValidUntil": null,
                                                    "quantity": 1,
                                                    "requestIndex": 0,
                                                    "seller": "1",
                                                    "unitMultiplier": 1
                                                }
                                            ],
                                            "logisticsInfo": [
                                                {
                                                    "itemIndex": 0,
                                                    "quantity": 1,
                                                    "shipsTo": [
                                                        "BRA"
                                                    ],
                                                    "slas": [
                                                        {
                                                        "id": "Regular",
                                                        "deliveryChannel": "delivery",
                                                        "name": "Regular Delivery",
                                                        "price": 846,
                                                        "shippingEstimate": "19bd"
                                                        },
                                                        {
                                                        "id": "Curbside pickup",
                                                        "deliveryChannel": "pickup-in-point",
                                                        "name": "Curbside pickup",
                                                        "shippingEstimate": "0bd",
                                                        "price": 0,
                                                        "availableDeliveryWindows": [
                                                            {
                                                            "startDateUtc": "2013-02-04T08:00:00+00:00",
                                                            "endDateUtc": "2013-02-04T13:00:00+00:00",
                                                            "price": 0
                                                            }
                                                        ],
                                                        "pickupStoreInfo": {
                                                            "isPickupStore": true,
                                                            "friendlyName": "Santa Felicidade",
                                                            "address": {
                                                                "addressType": "pickup",
                                                                "receiverName": null,
                                                                "addressId": "548304ed-dd40-4416-b12b-4b32bfa7b1e0",
                                                                "postalCode": "82320-040",
                                                                "city": "Curitiba",
                                                                "state": "PR",
                                                                "country": "BRA",
                                                                "street": "Rua Domingos Strapasson",
                                                                "number": "100",
                                                                "neighborhood": "Santa Felicidade",
                                                                "complement": "Loja 10",
                                                                "reference": null,
                                                                "geoCoordinates": [
                                                                    -49.334934,
                                                                    -25.401705
                                                                ]
                                                            },
                                                            "additionalInfo": ""
                                                        }
                                                        }
                                                    ],
                                                    "stockBalance": 199,
                                                    "deliveryChannels": [
                                                        {
                                                        "id": "delivery",
                                                        "stockBalance": 179
                                                        },
                                                        {
                                                        "id": "pickup-in-point",
                                                        "stockBalance": 20
                                                        }
                                                    ]
                                                }
                                            ],
                                            "postalCode": "80250000"                                         
                                        }
                                    }
                                }								
							}
						}
					}
				},
				"deprecated": false
			}
        }
    },
	"security": [
		{
			"appKey": [],
			"appToken": []
		}
    ],
    "components": {
        "schemas": {
            "fulfillmentSimulation":{
                "title": "fulfillmentSimulation",
                "required": [
                    "postalCode"
                ],
                "type": "object",
                "properties": {
                    "postalCode": {
                        "type": "string",
                        "description": "Delivery address postal code."
                    },
                    "geoCoordinates" : {
                        "type": "array",
                        "description": "geographic coordinates of the delivery address. This may be used instead of the postalCode, in case the marketplace is configured to accept geolocation. Example of value: `[-22.9443504,-43.1825635]`.",
                        "items": {
                            "type": "string"
                        }
                    },
                    "country": {
                        "type": "string",
                        "description": "ISO 3-digit code of the country where the delivery address is located."
                    },
                    "items": {
                        "type": "array",
                        "description": "array containing the cart items.",
                        "items": {
                            "$ref": "#/components/schemas/fulfillmentItem"
                        }
                    }
                }
            },
            "fulfillmentItem":{
                "title": "fulfillmentSimulation",
                "required": [
                    "id",
                    "quantity",
                    "seller"
                ],
                "type": "array",
                "properties": {
                    "id": {
                        "type": "string",
                        "description": "SKU ID."
                    },
                    "quantity": {
                        "type": "integer",
                        "description": "quantity of items of the SKU in the cart."
                    },
                    "seller": {
                        "type": "string",
                        "description": "ID of the seller registered in VTEX."
                    }
                }
            }
        }
    },
	"tags": [
		{
			"name": "External Seller"
		},
		{
			"name": "External Marketplace"
		}
	]
}